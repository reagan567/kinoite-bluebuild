[Resolve]
# ==============================================================================
# CONFIGURAÇÃO BASE DE DNS - BLUEBUILD IMAGE
# Nível: Vendor/Imagem (Prioridade 60)
# ==============================================================================

# ------------------------------------------------------------------------------
# 1. SERVIDORES DNS PRIMÁRIOS (Cloudflare)
# ------------------------------------------------------------------------------
# Foco: Performance Global e Baixa Latência.
# Inclui suporte a IPv4 e IPv6 + Validação de Hostname (#cloudflare-dns.com)
DNS=1.1.1.1#cloudflare-dns.com 2606:4700:4700::1111#cloudflare-dns.com 1.0.0.1#cloudflare-dns.com 2606:4700:4700::1001#cloudflare-dns.com

# ------------------------------------------------------------------------------
# 2. SERVIDORES DE FALLBACK (ControlD - Uncensored)
# ------------------------------------------------------------------------------
# Foco: Redundância e Anti-Censura.
FallbackDNS=76.76.2.11#p2.freedns.controld.com 2606:1a40::11#p2.freedns.controld.com 76.76.10.11#p2.freedns.controld.com 2606:1a40:1::11#p2.freedns.controld.com

# ------------------------------------------------------------------------------
# 3. CRIPTOGRAFIA E SEGURANÇA (DoT)
# ------------------------------------------------------------------------------
# 'yes': Valida a assinatura digital (DNSSEC) para evitar envenenamento de cache.
DNSSEC=yes

# 'opportunistic': Tenta usar criptografia (Porta 853). Se falhar (bloqueio de hotel/aeroporto),
# cai automaticamente para texto puro (Porta 53) para garantir conectividade.
# NOTA: Para forçar 'yes' (Strict), use um arquivo de override em /etc.
DNSOverTLS=opportunistic

# ------------------------------------------------------------------------------
# 4. PRIVACIDADE E RESOLUÇÃO LOCAL
# ------------------------------------------------------------------------------
# 'no': Desativa protocolos legados de descoberta local (reduz ruído na rede).
MulticastDNS=no
LLMNR=no

# 'no': Impede que nomes de host simples (sem ponto, ex: "servidor-casa")
# sejam enviados para a Cloudflare. Protege a privacidade da sua LAN.
ResolveUnicastSingleLabel=no

# 'yes': Respeita bloqueios manuais feitos no arquivo /etc/hosts
ReadEtcHosts=yes

# ------------------------------------------------------------------------------
# 5. CACHE E SYSTEMD-RESOLVED
# ------------------------------------------------------------------------------
# Habilita cache local para performance instantânea em sites visitados recentemente.
Cache=yes

# 'no': Evita poluir o cache global com dados da rede local.
CacheFromLocalhost=no

# 'yes': Cria o listener em 127.0.0.53. Essencial para que os apps usem o DoT.
DNSStubListener=yes