[Resolve]
# DNS SERVERS CONFIGURATION

# PRIMARY DNS: Cloudflare (Global low-latency)
# Includes IPv4 and IPv6 with SNI hostname validation for TLS
DNS=1.1.1.1#cloudflare-dns.com 1.0.0.1#cloudflare-dns.com 2606:4700:4700::1111#cloudflare-dns.com 2606:4700:4700::1001#cloudflare-dns.com

# FALLBACK DNS: Quad9 (Security-focused, blocks malicious domains)
FallbackDNS=9.9.9.9#dns.quad9.net 149.112.112.112#dns.quad9.net

# ENCRYPTION & SECURITY

DNSOverTLS=yes
# Validate DNS signatures to prevent spoofing.
DNSSEC=yes

# CACHE SETTINGS
# Enable internal RAM caching to reduce latency on repeated queries.
Cache=yes
# Security: Prevent local unprivileged applications from bypassing cache rules.
CacheFromLocalhost=no

# NETWORK BEHAVIOR
# Disable leaking single-label hostnames (like 'localhost' or 'workstation') to the internet.
ResolveUnicastSingleLabel=no
# Enable the local stub listener on 127.0.0.53 for local applications.
DNSStubListener=yes

# OPTIONAL: Read Timeouts (Performance tweak)
# Uncomment to speed up failover if a server is unresponsive.
ReadEtcHosts=yes