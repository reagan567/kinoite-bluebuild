[Resolve]
# ==============================================================================
#  CONFIGURAÇÃO DE DNS - BASE IMAGEM (RESTRICTIVE/SECURE)
#  Caminho: /usr/lib/systemd/resolved.conf.d/dns-override.conf
#
#  NOTA PARA O USUÁRIO:
#  Esta configuração força Criptografia (DoT) e Validação (DNSSEC).
#  Se você estiver em um "Captive Portal" (Hotel, Aeroporto, Wi-Fi Público)
#  e a página de login não abrir, você deve criar um override em /etc.
# ==============================================================================

# -------------------------
# DNS SERVERS (Cloudflare)
# -------------------------
DNS=1.1.1.1#cloudflare-dns.com 1.0.0.1#cloudflare-dns.com 2606:4700:4700::1111#cloudflare-dns.com 2606:4700:4700::1001#cloudflare-dns.com

# -------------------------
# FALLBACK DNS (Quad9)
# -------------------------
FallbackDNS=9.9.9.9#dns.quad9.net 149.112.112.112#dns.quad9.net 2620:fe::fe#dns.quad9.net 2620:fe::9#dns.quad9.net

# -------------------------
# SEGURANÇA E CRIPTOGRAFIA
# -------------------------
# 'yes': Força autenticação. Falha se o servidor não suportar TLS ou se
# houver interceptação (comum em Hotéis/Aeroportos).
# Para relaxar, use 'opportunistic' em um arquivo de configuração em /etc.
DNSOverTLS=yes

# 'yes': Valida a assinatura DNS. Garante que ninguém alterou a resposta.
# Para relaxar, use 'allow-downgrade'.
DNSSEC=yes

# -------------------------
# CACHE E PERFORMANCE
# -------------------------
Cache=yes
CacheFromLocalhost=no
DNSStubListener=yes
ResolveUnicastSingleLabel=no
ReadEtcHosts=yes